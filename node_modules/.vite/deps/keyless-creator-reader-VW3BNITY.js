import {
  createOrReadKeylessAction,
  require_navigation
} from "./chunk-WXPNTYII.js";
import "./chunk-OEMNNDGH.js";
import "./chunk-N7D3LS2K.js";
import "./chunk-EZPYZ6S7.js";
import "./chunk-VEWEVQY3.js";
import "./chunk-Y47XA3OG.js";
import "./chunk-7OMEVNVK.js";
import "./chunk-R4F3VVIN.js";
import {
  require_react
} from "./chunk-JG6EVUGA.js";
import {
  __toESM
} from "./chunk-3EJPJMEH.js";

// node_modules/@clerk/nextjs/dist/esm/app-router/client/keyless-creator-reader.js
var import_navigation = __toESM(require_navigation());
var import_react = __toESM(require_react());
var KeylessCreatorOrReader = (props) => {
  var _a;
  const { children } = props;
  const segments = (0, import_navigation.useSelectedLayoutSegments)();
  const isNotFoundRoute = ((_a = segments[0]) == null ? void 0 : _a.startsWith("/_not-found")) || false;
  const [state, fetchKeys] = import_react.default.useActionState(createOrReadKeylessAction, null);
  (0, import_react.useEffect)(() => {
    if (isNotFoundRoute) {
      return;
    }
    import_react.default.startTransition(() => {
      fetchKeys();
    });
  }, [isNotFoundRoute]);
  if (!import_react.default.isValidElement(children)) {
    return children;
  }
  return import_react.default.cloneElement(children, {
    key: state == null ? void 0 : state.publishableKey,
    publishableKey: state == null ? void 0 : state.publishableKey,
    __internal_keyless_claimKeylessApplicationUrl: state == null ? void 0 : state.claimUrl,
    __internal_keyless_copyInstanceKeysUrl: state == null ? void 0 : state.apiKeysUrl,
    __internal_bypassMissingPublishableKey: true
  });
};
export {
  KeylessCreatorOrReader
};
//# sourceMappingURL=keyless-creator-reader-VW3BNITY.js.map
